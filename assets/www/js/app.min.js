function debounce(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}}angular.module("krnTemplates",["views/create.tpl.html","views/delete.tpl.html","views/edit.tpl.html","views/main.tpl.html","views/view.tpl.html"]),angular.module("views/create.tpl.html",[]).run(["$templateCache",function(a){"use strict";a.put("views/create.tpl.html",'<div ng-cloak krn-wrapper style="text-align: center; padding: 10px!important;">\n\n    <h3>Create A New Player</h3>\n\x3c!--player text, technical text, tactical text, physical text, psych--\x3e\n<h5>Player</h5>\n<input  type="text" ng-model="player.player" maxlength="5" />\n\n    <h5>Technical</h5>\n    <input  type="text" ng-model="player.technical" maxlength="1" />\n\n    <h5>Tactical</h5>\n    <input  type="text" ng-model="player.tactical" maxlength="1" />\n\n    <h5>Physical</h5>\n    <input  type="text" ng-model="player.physical" maxlength="1" />\n\n    <h5>Psychological</h5>\n    <input  type="text" ng-model="player.psych" maxlength="1" />\n\n    <button class="btn1" ng-click="savePlayer()">Save</button>\n</div>')}]),angular.module("views/delete.tpl.html",[]).run(["$templateCache",function(a){"use strict";a.put("views/delete.tpl.html",'<div ng-cloak krn-wrapper style="text-align: center;">\n\n    <h3>Delete A Player</h3>\n\n\n\n\n</div>')}]),angular.module("views/edit.tpl.html",[]).run(["$templateCache",function(a){"use strict";a.put("views/edit.tpl.html",'<div ng-cloak krn-wrapper style="text-align: center;">\n\n    <h3>Edit A Player</h3>\n\n\n\n\n</div>')}]),angular.module("views/main.tpl.html",[]).run(["$templateCache",function(a){"use strict";a.put("views/main.tpl.html",'<div ng-cloak krn-wrapper style="text-align: center;">\n\n\n\n<div class="tableHolder">\n    <div class="setup">\n        <input type="text" ng-model="createSheetModel"/>\n        <button class="btn1" ng-click="createSheet()" ng-disabled="createSheetModel==\'\'">Create</button>\n    </div>\n\n<table class="table table-striped  firsttable "  ng-show="selectedSheetE">\n<thead>\n<tr>\n    <th>Green</th>\n    <th>A</th>\n    <th>B</th>\n    <th>C</th>\n    <th>D</th>\n    <th>Delete</th>\n</tr>\n</thead>\n\n<tbody>\n<tr ng-repeat="g in greenteam">\n<td ng-click="handlePlayer(g)">{{g.player}}</td>\n<td ng-click="handlePlayer(g)">{{g.a}}</td>\n    <td ng-click="handlePlayer(g)">{{g.b}}</td>\n    <td ng-click="handlePlayer(g)">{{g.c}}</td>\n    <td ng-click="handlePlayer(g)">{{g.d}}</td>\n    <td><button  ng-click="deletePlayer(g)" class="redBtn"><i class="icon-MTORIcons_Cancel-Delete"></i></button></td>\n</tr>\n</tbody>\n</table>\n</div>\n\n<div class="tableHolder">\n    <div class="setup">\n        <select class="form-control" ng-model="selectedSheet" ng-options="s.sheet as s.sheet for s in sheets"></select>\n        <button class="btn1" ng-click="editSheet()" ng-disabled="selectedSheet==undefined">Edit</button>\n    </div>\n\n<table class="table table-striped  secondtable table-condensed"  ng-show="selectedSheetE">\n<thead>\n<tr><th>White</th><th>A</th><th>B</th><th>C</th><th>D</th>\n    <th>Delete</th></tr>\n</thead>\n\n<tbody>\n<tr ng-repeat="w in whiteteam">\n    <td ng-click="handlePlayer(w)">{{w.player}}</td>\n    <td ng-click="handlePlayer(w)">{{w.a}}</td>\n    <td ng-click="handlePlayer(w)">{{w.b}}</td>\n    <td ng-click="handlePlayer(w)">{{w.c}}</td>\n    <td ng-click="handlePlayer(w)">{{w.d}}</td>\n    <td><button  ng-click="deletePlayer(w)" class="redBtn"><i class="icon-MTORIcons_Cancel-Delete"></i></button></td>\n</tr>\n</tbody>\n</table>\n</div>\n\n<div class="text-center editHolder">\n<div krn-wrapper>\n    <h3>Editor</h3>\n\n    <div class="segments">\n        <button class="segmentBtn" ng-disabled="segmentButton" ng-click="segmentToggle(\'c\')">Create</button><button class="segmentBtn" ng-disabled="!segmentButton" ng-click="segmentToggle(\'e\')">Edit</button>\n    </div>\n\n    <div class="createPlayer" ng-show="segmentButton">\n\n        <h5>Team</h5>\n        <select ng-model="newplayer.team"  ng-disabled="!selectedSheetE">\n            <option value="Green">Green</option>\n            <option value="White">White</option>\n        </select>\n\n        <h5>Player</h5>\n        <input  type="text" ng-model="newplayer.player" maxlength="5"  ng-disabled="!selectedSheetE"/>\n\n        <h5>Technical</h5>\n        <input  type="text" ng-model="newplayer.a" maxlength="1"  ng-disabled="!selectedSheetE"/>\n\n        <h5>Tactical</h5>\n        <input  type="text" ng-model="newplayer.b" maxlength="1"  ng-disabled="!selectedSheetE"/>\n\n        <h5>Physical</h5>\n        <input  type="text" ng-model="newplayer.c" maxlength="1"  ng-disabled="!selectedSheetE"/>\n\n        <h5>Psychological</h5>\n        <input  type="text" ng-model="newplayer.d" maxlength="1" ng-disabled="!selectedSheetE" />\n\n        <button class="btn1" ng-click="saveNewPlayer()" ng-disabled="!selectedSheetE">Save</button>\n    </div>\n    \x3c!--edit--\x3e\n\n    <div class="editPlayer" ng-show="!segmentButton">\n\n        <h5>Team</h5>\n        <select ng-model="player.team"  ng-disabled="!selectedSheetE">\n            <option value="Green">Green</option>\n            <option value="White">White</option>\n        </select>\n\n        <h5>Player</h5>\n        <input  type="text" ng-model="player.player" maxlength="5"  ng-disabled="!selectedSheetE"/>\n\n        <h5>Technical</h5>\n        <input  type="text" ng-model="player.a" maxlength="1"  ng-disabled="!selectedSheetE"/>\n\n        <h5>Tactical</h5>\n        <input  type="text" ng-model="player.b" maxlength="1"  ng-disabled="!selectedSheetE"/>\n\n        <h5>Physical</h5>\n        <input  type="text" ng-model="player.c" maxlength="1"  ng-disabled="!selectedSheetE"/>\n\n        <h5>Psychological</h5>\n        <input  type="text" ng-model="player.d" maxlength="1" ng-disabled="!selectedSheetE" />\n\n        <button class="btn1" ng-click="savePlayer()" ng-disabled="!selectedSheetE">Update</button>\n    </div>\n</div>\n</div>\n\n</div>')}]),angular.module("views/view.tpl.html",[]).run(["$templateCache",function(a){"use strict";a.put("views/view.tpl.html",'<div ng-cloak krn-wrapper style="text-align: center;">\n\n    <h3>View All Data</h3>\n\n    <div class="datagrid">\n<table>\n<thead>\n<tr>\n    <th>Player</th>\n    <th>A</th>\n    <th>B</th>\n    <th>C</th>\n    <th>D</th>\n</tr>\n</thead>\n\n    <tbody></tbody>\n</table>\n    </div>\n\n</div>')}]),function(){"use strict";function a(){function a(a,b,c,d){angular.isDefined(c.position)&&c.position?("Header"===c.position&&b.addClass("wrapper withHeader"),"Footer"===c.position&&b.addClass("wrapper withFooter"),"Both"===c.position&&b.addClass("wrapper withHeaderFooter")):b.addClass("wrapper"),b.on("$destroy",function(){})}return{restrict:"A",link:a}}angular.module("krnWrapper",[]),angular.module("krnWrapper").directive("krnWrapper",[a])}(),function(){"use strict";function a(){function a(){try{angular.bootstrap(document,["ess"])}catch(a){console.log("Angular didn't load "+a)}}a()}function b(a){2!=a&&navigator.app.exitApp()}function c(a,c){a.os="ios",window.cordova&&"android"===device.platform.toLowerCase()&&(a.os="android",document.addEventListener("backbutton",function(a){a.preventDefault(),navigator.notification.confirm("Are you sure want to exit from App?",b,"Confirmation",["Yes","No"])},!1))}angular.module("ess",["ngAnimate","ngTouch","ngSanitize","krnWrapper","krnTemplates"]),angular.element(document).ready(function(){null!=navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(android)|(webOS)/i)?document.addEventListener("deviceready",a,!1):a()}),angular.module("ess").run(["$rootScope","$location",c])}(),function(){function a(a,b,c,d,e){function f(a){a.getFile(n,{create:!0,exclusive:!1},h,l)}function g(a){o="soccer.csv",a.getFile(o,{create:!0,exclusive:!1},i,l)}function h(b){s=b,s.file(function(b){var c=new FileReader;c.onloadend=function(b){if(0!=b.target.result.length){try{a.data=$.parseJSON(b.target.result)}catch(a){navigator.notification.alert("Data file "+n+" is invalid.  Delete or rename it.",m,"Error","OK")}void 0!==a.data.version&&a.data.version==p||navigator.notification.confirm("Data file "+n+" is in an old format. Delete or rename it.",m,"Error","OK"),a.data.deviceInfo=a.deviceInfo,a.setSessionSelected(),a.sessionSelected&&a.loadSessionData(),a.$digest()}SpinnerDialog.hide()},c.readAsText(b)})}function i(a){t=a,t.createWriter(k,l)}function j(b){b.seek(0);var c=new Blob([angular.toJson(a.data)],{type:"text/plain"});b.write(c),b.onwriteend=function(a){}}function k(b){b.seek(0);var c=new Blob([a.csv],{type:"text/csv"});b.write(c),b.onwriteend=function(b){window.plugins.toast.show(u,"short","center"),a.sendEmail&&a.emailData()}}function l(a){window.plugins.toast.show("code: "+a.code,"short","center")}function m(){navigator.app.exitApp()}a.debug=!window.cordova,a.toggleDebug=function(){window.cordova?a.debug=!1:a.debug=!a.debug},a.createModalSession=!1,a.toggleCreateSession=function(){a.createModalSession=!a.createModalSession},a.createModalSheet=!1,a.toggleCreateSheet=function(){a.createModalSheet=!a.createModalSheet},a.createModalPlayers=!1,a.toggleCreatePlayers=function(){a.createModalPlayers=!a.createModalPlayers},a.editModalPlayer=!1,a.toggleEditPlayer=function(){a.editModalPlayer=!a.editModalPlayer},a.editModalRatings=!1,a.toggleEditRatings=function(){a.editModalRatings=!a.editModalRatings},a.editModalBubbleRanking=!1,a.toggleBubbleRanking=function(){a.editModalBubbleRanking=!a.editModalBubbleRanking},a.nameRegex=/^[\w\-]+$/,a.suffixRegex=/^[\w\-]*$/,a.teamListRegex=/^[,\w\-]+$/,a.catListRegex=/^([a-z\d]{1,5})(,([a-z\d]{1,5})){0,14}$/i,a.ratingValuesRegex=/^([1-9]|10)(,([1-9]|10)){0,9}$/,a.dateMMdd=b("date")(new Date,"MMdd"),a.hasDuplicates=function(b){if(a.debug&&console.log("hasDuplicates: arr = "+b),b.length<2)return!1;for(var c={},d=0;d<b.length;++d){if(b[d]in c)return!0;c[b[d]]=1}return!1};var n="soccer.txt",o="soccer.csv",p=201610;a.deviceInfo={uuid:"na"},window.cordova&&(a.deviceInfo={uuid:device.uuid}),a.sessionSelected=void 0,a.newSession={sessionName:"",lastRatingsChange:"",sheets:[]},a.sheetSelected=void 0,a.newSheet={sheetName:"",lastRatingsChange:"",eType:"",teams:[],grade:"",gender:"",field:"",group:"",comments:"",playerData:[]},a.newSheetNameSuffix="",a.teamChoices=["Blue","Green","Red","White"],a.teamsSelectedToggle=function(b){a.debug&&console.log("teamsSelectedToggle"),-1===a.newSheet.teams.indexOf(b)?a.newSheet.teams.push(b).sort():a.newSheet.teams.splice(a.newSheet.teams.indexOf(b),1)},a.evalList=["Night1","Night2","Bubble","Custom"],a.gradeList=["3rd","4th","5th","6th","7th8th"],a.genderList=["Boys","Girls"],a.sfbList=[],a.groupList=[],a.reverse=function(a){if(void 0!==a)return a.slice().reverse()},a.playerDataSelected=null,a.newPlayerData={team:"",id:"",lastRatingsChange:"",ratings:{}},a.tmpTeam="",a.editTmpTeam=function(b){a.debug&&console.log("editTmpTeam"),a.tmpTeam=b},a.changeBlur=function(){angular.element("select").blur()},a.countDebug=0,a.counterDebug=function(b){a.countDebug+=b,a.countDebug>=7&&(a.countDebug=0,a.toggleDebug())},a.countAdmin=0,a.counterAdmin=function(b){a.countAdmin+=b,a.countAdmin>=7&&(a.countAdmin=0,a.initSessionModal(),a.toggleCreateSession())},a.initSession=function(){return a.debug&&console.log("initSession"),{sessionName:"",lastRatingsChange:"",sheets:[]}},a.setSessionSelected=function(){if(a.debug&&console.log("setSessionSelected"),a.data.sessions&&a.data.sessions.length>0){var b=a.sessionIndexOf(a.data.sessionLastselectedName);-1<b?a.sessionSelected=a.data.sessions[b]:(a.sessionSelected=a.data.sessions[0],console.error("setSessionSelected: Sessions exist, but sessionLastselectedName not found"))}else a.sessionSelected=null},a.addSession=function(b){a.debug&&console.log("addSession"),a.data.sessions.push(b)},a.sessionIndexOf=function(b){for(var c=-1,d=0;d<a.data.sessions.length;d++)if(a.data.sessions[d].sessionName==b){c=d;break}return c},a.editSessionName=function(b){a.debug&&console.log("editSessionName"),a.newSession.sessionName=b},a.initSessionModal=function(){a.debug&&console.log("initSessionModal"),a.newSession.sessionName=""},a.createSession=function(){if(a.debug&&console.log("createSession"),""==a.newSession.sessionName)return void alert("Session cannot be empty!");-1<a.sessionIndexOf(a.newSession.sessionName)?alert('Session "'+a.newSession.sessionName+'" already exists!'):(a.addSession(a.newSession),a.sessionSelected=a.newSession,a.loadSessionData(),a.newSession=a.initSession(),a.toggleCreateSession())},a.loadSessionData=function(){a.debug&&console.log("loadSessionData"),a.data.sessionLastselectedName=a.sessionSelected.sessionName,a.setSheetSelected(),a.sheetSelected&&a.loadSheetData()},a.initSheet=function(){return a.debug&&console.log("initSheet"),{sheetName:"",lastRatingsChange:"",eType:"",teams:[],grade:"",gender:"",field:"",group:"",comments:"",playerData:[]}},a.setSheetSelected=function(){if(a.debug&&console.log("setSheetSelected"),!a.sessionSelected)return void console.error("setSheetSelected: Should not be called when no session has been selected.");if(a.sessionSelected.sheets&&a.sessionSelected.sheets.length>0){var b=a.sheetIndexOf(a.sessionSelected.sheetLastselectedName);-1<b?a.sheetSelected=a.sessionSelected.sheets[b]:(a.sheetSelected=a.sessionSelected.sheets[0],console.error("setSheetSelected: Schema error - Sheets exist, but sheetLastselectedName not found"))}else a.sheetSelected=null},a.addSheet=function(b){a.debug&&console.log("addSheet"),a.sessionSelected.sheets.push(b)},a.sheetIndexOf=function(b){for(var c=-1,d=0;d<a.sessionSelected.sheets.length;d++)if(a.sessionSelected.sheets[d].sheetName==b){c=d;break}return c},a.editSheetName=function(b){a.debug&&console.log("editSheetName: sheetName = "+a.newSheet.sheetName),void 0===a.newSheet.sheetName&&(a.newSheet.sheetName=""),a.newSheet.sheetName=a.newSheet.sheetName+b},a.editGrade=function(b){a.newSheet.grade=b},a.editGender=function(b){a.newSheet.gender=b},a.editEvalType=function(b){a.debug&&console.log("editEvalType("+b+")"),a.newSheet.eType=b,a.applyEvalType(b)},a.applyEvalType=function(b){switch(a.debug&&console.log("applyEvalType("+b+")"),a.sfbList=[],a.groupList=[],b){case void 0:console.log("undefined eType");break;case"":break;case"Night1":a.sfbList=["Station1","Station2","Station3","Station4","Station5","Station6"],a.groupList=["Group1","Group2","Group3","Group4","Group5","Group6"],a.newSheet.categories=["A","B"],a.newSheet.ratingValues=["1","2","3","4","5","6"],a.newSheet.ratingTip="1=Poor 2=Below Average 3=Above Average 4=Excellent";break;case"Night2":a.sfbList=["Field1","Field2","Field3"],a.groupList=[],a.newSheet.categories=["A","B","C","D"],a.newSheet.ratingValues=["1","2","3","4","5","6"],a.newSheet.ratingTip="1=Poor 2=Below Average 3=Above Average 4=Excellent";break;case"Bubble":a.sfbList=["Field1","Field2","Field3","Field4","Field5"],a.groupList=[],a.newSheet.categories=["Forced Ranking"],a.newSheet.ratingValues=["20","19","18","17","16","15","14","13","12","11","10","9","8","7","6","5","4","3","2","1"],a.newSheet.ratingTip="1=Best";break;case"Custom":break;default:alert("Error setting Eval Type value of "+b)}},a.editStation=function(b){a.newSheet.field=b},a.editGroup=function(b){a.newSheet.group=b},a.nullCreateSheetData=function(){a.debug&&console.log("nullCreateSheetData"),a.newSheet=a.initSheet()},a.initSheetModal=function(){a.debug&&console.log("initSheetModal"),a.sheetSelected&&""!=a.sheetSelected&&void 0!==a.sheetSelected&&(a.editEvalType(a.sheetSelected.eType),a.newSheet.teams=a.sheetSelected.teams.slice(),a.newSheet.grade=a.sheetSelected.grade,a.newSheet.gender=a.sheetSelected.gender,a.newSheet.field=a.sheetSelected.field,"Night1"!=a.newSheet.eType&&(a.newSheet.field=""),a.newSheet.group="",a.newSheet.comments="",a.newSheet.sheetName="","Custom"==a.newSheet.eType&&(a.newSheet.teams=a.sheetSelected.teams.slice(),a.newSheet.categories=a.sheetSelected.categories,a.newSheet.ratingValues=a.sheetSelected.ratingValues,a.newSheet.ratingTip=a.sheetSelected.ratingTip))},a.createSheet=function(b){return a.debug&&console.log("createSheet: name= "+b),void 0===b||""==b?void alert("Sheet name cannot be empty!"):2!=a.newSheet.teams.length&&"Custom"!=a.newSheet.eType?void alert("Two teams must be selected!"):""==a.newSheet.eType?void alert("An evaluation type must be selected!"):-1<a.sheetIndexOf(b)?void alert('Sheet "'+b+'" already exists!'):"Custom"==a.newSheet.eType&&(a.hasDuplicates(a.newSheet.teams)||a.hasDuplicates(a.newSheet.categories)||a.hasDuplicates(a.newSheet.ratingValues))?void alert("Teams, Categories, and Ratings cannot have duplicates!"):(a.newSheet.sheetName=b,a.addSheet(a.newSheet),a.sheetSelected=a.newSheet,a.loadSheetData(),a.newSheet=a.initSheet(),void a.toggleCreateSheet())},a.loadSheetData=function(){a.debug&&console.log("loadSheetData"),a.sheetSelected&&(a.sessionSelected.sheetLastselectedName=a.sheetSelected.sheetName)},a.monitorLength=function(b){a.sheetSelected.comments.length>b&&(a.sheetSelected.comments=a.sheetSelected.comments.substring(0,b),window.cordova&&(console.log("beep"),navigator.notification.beep(1)))},a.nullNewPlayerData=function(){a.debug&&console.log("nullNewPlayerData"),a.newPlayerData={team:"",id:"",lastRatingsChange:"",ratings:{}}},a.getPlayerId=function(){return a.playerDataSelected.id},a.getPlayerRating=function(b){return a.playerDataSelected?(a.debug&&console.log("getPlayerRating: key = "+b+" rating = "+a.playerDataSelected.ratings[b]),a.playerDataSelected.ratings[b]):""},a.setPlayerRating=function(c,d){a.playerDataSelected.ratings[c]==d?a.playerDataSelected.ratings[c]="":a.playerDataSelected.ratings[c]=d;var e=b("date")(new Date,"yyyy-MM-ddTHH:mm");a.data.lastRatingsChange=e,a.sessionSelected.lastRatingsChange=e,a.sheetSelected.lastRatingsChange=e,a.playerDataSelected.lastRatingsChange=e},a.nullPlayerData=function(){a.playerData={}},a.playerIndexOf=function(b,c){var d=-1;if(a.sheetSelected&&a.sheetSelected.playerData)for(var e=0;e<a.sheetSelected.playerData.length;e++)if(a.sheetSelected.playerData[e].team==b&&a.sheetSelected.playerData[e].id==c){d=e;break}return d},a.saveNewPlayer=function(){if(""==a.newPlayerData.team||void 0===a.newPlayerData.id||""==a.newPlayerData.id.toString())return void alert("Team and Player are required!");if(-1<a.playerIndexOf(a.newPlayerData.team,a.newPlayerData.id))return void alert('Player "'+a.newPlayerData.team+a.newPlayerData.id+'"already exists!');a.sheetSelected.playerData.push(a.newPlayerData);var b=a.newPlayerData.team;a.newPlayerData={team:"",id:"",lastRatingsChange:"",ratings:{}},a.newPlayerData.team=b},a.handlePlayer=function(b){a.playerDataSelected=b,a.tmpTeam=a.playerDataSelected.team,a.toggleEditPlayer()},a.handleRatings=function(b){a.debug&&console.log("handleRatings: person = "+b),a.playerDataSelected=b,"Bubble"===a.sheetSelected.eType&&10<a.sheetSelected.ratingValues.length&&1===a.sheetSelected.categories.length?a.toggleBubbleRanking():a.toggleEditRatings()},a.deletePlayer=function(b){function c(c){"YES"===c.input1.toUpperCase()&&2===c.buttonIndex&&(a.sheetSelected.playerData.splice(a.sheetSelected.playerData.indexOf(b),1),a.$digest())}if(window.cordova)navigator.notification.prompt("Type 'yes' to delete this player.",c,"Confirmation",["Cancel","OK"]);else{1==confirm("Delete?")&&a.sheetSelected.playerData.splice(a.sheetSelected.playerData.indexOf(b),1)}};var q=!1;window.cordova||!q?(a.data={version:p,lastRatingsChange:"",deviceInfo:a.deviceInfo,sessions:[]},a.data.sessions.push({sessionName:"Default",sheets:[]}),a.data.sessionLastselectedName=a.data.sessions[0].sessionName):q&&(a.data={version:201610,deviceInfo:a.deviceInfo,sessionLastselectedName:"1124_4-6pm",sessions:[{sessionName:"Default",sheets:[{sheetName:"3rdBoysNight1Station1Group1",eType:"Night1",teams:["Blue","Green"],grade:"3rd",gender:"Boys",field:"Station1",group:"Group1",playerData:[{team:"Blue",id:0,ratings:{A:"3",B:"4"}},{team:"Blue",id:10,ratings:{}},{team:"Green",id:1,ratings:{}},{team:"Green",id:11,ratings:{A:"2",B:"2",C:"3"}}],categories:["A","B","C"],ratingValues:["1","2","3","4"],ratingTip:"1=Poor 2=Below Average 3=Above Average 4=Excellent"},{sheetName:"4thGirlsNight2Field2",eType:"Night2",teams:["Green","Red"],grade:"4th",gender:"Girls",field:"Field2",group:"",playerData:[{team:"Green",id:2,lastRatingsChange:"",ratings:{}},{team:"Green",id:12,ratings:{}},{team:"Red",id:2,ratings:{D:"1"}},{team:"Red",id:3,ratings:{}}],categories:["A","B","C","D"],ratingValues:["1","2","3","4"],ratingTip:"1=Poor 2=Below Average 3=Above Average 4=Excellent"}]},{sessionName:"1124_4-6pm",sheetLastselectedName:"Custom",sheets:[{sheetName:"7th8thGirlsBubbleField5",eType:"Bubble",teams:["Red","White"],grade:"7th8th",gender:"Girls",field:"Field5",group:"",playerData:[{team:"White",id:99,lastRatingsChange:"",ratings:{A:"3"}}],categories:["A"],ratingValues:["6","5","4","3","2","1"],ratingTip:"Rating indicates which team a player should be on; 1=Highest Team"},{sheetName:"Custom",eType:"Custom",teams:["t1","t2","t3"],grade:"",gender:"",field:"",group:"",playerData:[{team:"t1",id:0,lastRatingsChange:"",ratings:{a:"10",c:"5",g:"1",k:"5"}},{team:"t1",id:1,ratings:{i:"10",f:"10",d:"10"}},{team:"t1",id:2,ratings:{m:""}},{team:"t2",id:2,ratings:{h:"5"}},{team:"t2",id:3,ratings:{}},{team:"t2",id:4,ratings:{}},{team:"t3",id:4,ratings:{d:"1"}},{team:"t3",id:5,ratings:{}},{team:"t3",id:6,ratings:{}}],categories:["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o"],ratingValues:["1","5","10"],ratingTip:"Ratings Tip example"}]}]}),a.setSessionSelected(),a.sessionSelected&&a.loadSessionData();var r=!0;a.$watch("data",function(){r?e(function(){r=!1}):a.data.sessions&&a.data.sessions.length>0&&a.saveFileContent()},!0),a.cleanStr=function(a){return void 0===a?"":a},a.csv="",a.dataToCsv=function(){var b="Csv backup of "+n+",\r\n";b+=",From device,\r\n";for(di in a.data.deviceInfo)b+=",,"+di+',"'+a.data.deviceInfo[di]+'",\r\n';b+=",Schema version,"+a.data.version+",\r\n",b+=",Last ratings change,"+a.data.lastRatingsChange+",\r\n",b+=",\r\n";for(var c=0;c<a.data.sessions.length;c++)b+=a.sessionToCsv(a.data.sessions[c])+",\r\n";return b},a.sessionToCsv=function(b){var c="Session Data,\r\n";c+=",sessionName,"+b.sessionName+",\r\n",c+=",Last ratings change,"+b.lastRatingsChange+",\r\n",c+=",\r\n";for(var d=0;d<b.sheets.length;d++)c+=a.sheetToCsv(b,b.sheets[d])+",\r\n";return c},a.sheetToCsv=function(b,c){for(var d=",Sheet Data,\r\n",e=["sheetName","eType","teams","grade","gender","field","group","comments","categories","ratingValues","ratingTip","lastRatingsChange"],f=0;f<e.length;f++)d+=",,"+e[f]+',"'+a.cleanStr(c[e[f]])+'",\r\n';var g=["sessionName","sheetName"],h=["team","id"];g=g.concat(h).concat(c.categories).concat("lastRatingsChange"),d+=g.join()+",\r\n";for(var i="",j=0;j<c.playerData.length;j++){i=b.sessionName+","+c.sheetName+",";for(var k=0;k<h.length;++k)i+=a.cleanStr(c.playerData[j][h[k]])+",";for(var k=0;k<c.categories.length;++k)i+=a.cleanStr(c.playerData[j].ratings[c.categories[k]])+",";i+=a.cleanStr(c.playerData[j].lastRatingsChange)+",",d+=i+"\r\n"}return d};var s,t;window.cordova&&(SpinnerDialog.show("Initializing","one moment...",!0),window.resolveLocalFileSystemURL(cordova.file.externalRootDirectory,f,l)),a.saveFileContent=function(){a.countAdmin=0,a.countDebug=0,window.cordova?s.createWriter(j,l):console.log("auto saved")},a.emailAvailable=!1,window.cordova&&cordova.plugins.email.isAvailable(function(b){a.emailAvailable=b}),a.emailData=function(){if(window.cordova){var b=cordova.file.externalRootDirectory+s.fullPath;t&&(b=[cordova.file.externalRootDirectory+s.fullPath,cordova.file.externalRootDirectory+t.fullPath]),cordova.plugins.email.open({subject:"BAYS Evals data from device with uuid="+a.deviceInfo.uuid,attachments:b})}};var u="Data "+n+" has been backed-up as file "+o;a.sendEmail=!1,a.saveToCsv=function(b){a.debug&&console.log("In saveToCsv"),a.sendEmail=!!b,window.cordova?(a.csv=a.dataToCsv(),window.resolveLocalFileSystemURL(cordova.file.externalRootDirectory,g,l),a.debug&&console.log("cordova.file.externalRootDirectory="+cordova.file.externalRootDirectory)):(a.csv=a.dataToCsv(),alert(u))}}angular.module("ess").controller("MainController",["$scope","$filter","$rootScope","$window","$timeout",a])}();